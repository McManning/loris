
{% macro primitive_property(name, format) %}
    {% if format == 'date' %}
        $serialized->{{ name }} = $this->{{ name }}->format('Y-m-d H:i:s');
    {% else %}
        $serialized->{{ name }} = $this->{{ name }};
    {% endif %}
{% endmacro %}

{% macro resource_property(name) %}
        $serialized->{{ name }} = $this->{{ name }}->serialize();
{% endmacro %}

{% macro collection_property(name) %}
        $serialized->{{ name }} = $this->{{ name }}->serialize();
{% endmacro %}

{% macro object_property(name) %}
        $serialized->{{ name }} = new \stdClass;
{% endmacro %}

{% macro object_property_primitive(object, name, format) %}
    {% if format == 'date' %}
        $serialized->{{ object }}->{{ name }} = $this->{{ object }}->{{ name }}->format('Y-m-d H:i:s');
    {% else %}
        $serialized->{{ object }}->{{ name }} = $this->{{ object }}->{{ name }};
    {% endif %}
{% endmacro %}

{% macro object_property_resource(object, name) %}
        $serialized->{{ object }}->{{ name }} = $this->{{ object }}->{{ name }}->serialize();
{% endmacro %}

{% macro object_property_collection(object, name) %}
        $serialized->{{ object }}->{{ name }} = $this->{{ object }}->{{ name }}->serialize();
{% endmacro %}

{% macro array_property_primitives(name, format) %}
    {% if format == 'date' %}
        $serialized->{{ name }} = array();
        ${{ name }}Count = count($this->{{ name }});
        for ($i = 0; $i < ${{ name }}Count; $i++) {
            $serialized->{{ name }}[$i] = $this->{{ name }}[$i]->format('Y-m-d H:i:s');
        }
    {% else %}
        $serialized->{{ name }} = clone $this->{{ name }};
    {% endif %}
{% endmacro %}

{% macro array_property_resources(name) %}
        $serialized->{{ name }} = array();
        for ($i = 0; $i < count($this->{{ name }}); $i++) {
            $serialized->{{ name }}[] = $this->{{ name }}[$i]->serialize();
        }
{% endmacro %}

{% macro array_property_collections(name) %}
        $serialized->{{ name }} = array();
        for ($i = 0; $i < count($this->{{ name }}); $i++) {
            $serialized->{{ name }}[] = $this->{{ name }}[$i]->serialize();
        }
{% endmacro %}

{% macro array_property_object(name) -%}
            $serialized->{{ name }}[$i] = new \stdClass;
{%- endmacro %}

{% macro array_property_object_primitive(array, name, format) %}
    {% if format == 'date' %}
            $serialized->{{ array }}[$i]->{{ name }} = $this->{{ array }}[$i]->{{ name }}->format('Y-m-d H:i:s');
    {% else %}
            $serialized->{{ array }}[$i]->{{ name }} = $this->{{ array }}[$i]->{{ name }};
    {% endif %}
{% endmacro %}

{% macro array_property_object_resource(array, name) %}
            $serialized->{{ array }}[$i]->{{ name }} = $this->{{ array }}[$i]->{{ name }}->serialize();
{% endmacro %}

{% macro array_property_object_collection(array, name) %}
            $serialized->{{ array }}[$i]->{{ name }} = $this->{{ array }}[$i]->{{ name }}->serialize();
{% endmacro %}



