<?
{% macro string_property(name, format) %}
    {% if format == 'date' %}
        $this->{{ name }} = DateTime::createFromFormat(
            '{{ input_date_format }}', 
            $results->{{ name }}
        );
    {% else %}
        $this->{{ name }} = $results->{{ name }};
    {% endif %}
{% endmacro %}

{% macro number_property(name, format) %}
        $this->{{ name }} = intval(
            $results->{{ name }}
        );
{% endmacro %}

{% macro boolean_property(name) %}
        $this->{{ name }} = (1 == $results->{{ name }});
{% endmacro %}

{% macro resource_property(name) %}
        if ($results->{{ name }}Id !== null) {
            $this->{{ name }}->id(
                $results->{{ name }}Id
            );
        } else {
            $this->{{ name }} = new NullResource();
        }
{% endmacro %}

{% macro collection_property(name) %}
        if ($results->{{ name }}Id !== null) {
            $this->{{ name }}->id(
                $results->{{ name }}Id
            );
            $this->{{ name }}->meta->total = intval(
                $results->{{ name }}Total
            );
        } else {
            $this->{{ name }} = new NullResource();
        }
{% endmacro %}

{% macro object_property_string(object, name, format) %}
    {% if format == 'date' %}
        $this->{{ object }}->{{ name }} = DateTime::createFromFormat(
            '{{ input_date_format }}', 
            $results->{{ object }}->{{ name }}
        );
    {% else %}
        $this->{{ object }}->{{ name }} = $results->{{ object }}->{{ name }};
    {% endif %}
{% endmacro %}

{% macro object_property_number(object, name, format) %}
        $this->{{ object }}->{{ name }} = intval(
            $results->{{ object }}->{{ name }}
        );
{% endmacro %}

{% macro object_property_boolean(object, name) %}
        $this->{{ object }}->{{ name }} = (1 == $results->{{ object }}->{{ name }});
{% endmacro %}

{% macro object_property_resource(object, name) %}
        if ($results->{{ object }}->{{ name }}Id !== null) {
            $this->{{ object }}->{{ name }}->id(
                $results->{{ object }}->{{ name }}Id
            );
        } else {
            $this->{{ object }}->{{ name }} = new NullResource();
        }
{% endmacro %}

{% macro object_property_collection(object, name) %}
        if ($results->{{ object }}->{{ name }}Id !== null) {
            $this->{{ object }}->{{ name }}->id(
                $results->{{ object }}->{{ name }}Id
            );
            $this->{{ object }}->{{ name }}->meta->total = intval(
                $results->{{ object }}->{{ name }}Total
            );
        } else {
            $this->{{ object }}->{{ name }} = new NullResource();
        }
{% endmacro %}

{% macro array_property_strings(name, format) %}
        foreach ($results->{{ name }} as $item) {
        {% if format == 'date' %}
            $this->{{ name }}[] = DateTime::createFromFormat(
                '{{ input_date_format }}', 
                $item
            );
        {% else %}
            $this->{{ name }}[] = $item;
        {% endif %}
        }
{% endmacro %}

{% macro array_property_numbers(name, format) %}
        foreach ($results->{{ name }} as $item) {
            $this->{{ name }}[] = intval($item);
        }
{% endmacro %}

{% macro array_property_booleans(name) %}
        foreach ($results->{{ name }} as $item) {
            $this->{{ name }}[] = (1 == $item);
        }
{% endmacro %}

{% macro array_property_resources(name) %}
        foreach ($results->{{ name }} as $item) {
            if ($item->resourceItemId !== null) {
                $resourceItem = clone $this->arrayPropertyPattern;
                $resourceItem->id(
                    $item->resourceItemId
                );
                $this->{{ name }}[] = $resourceItem;
            }
        }
{% endmacro %}

{% macro array_property_collections(name) %}
        foreach ($results->{{ name }} as $item) {
            if ($item->collectionItemId !== null) {
                $collectionItem = clone $this->arrayPropertyPattern;
                $collectionItem->id(
                    $item->collectionItemId
                );
                $this->{{ name }}[] = $collectionItem;
            }
        }
{% endmacro %}

{% macro array_property_object(name) -%}
            $this->{{ name }}[$i] = clone $this->{{ name }}Pattern;
{%- endmacro %}

{% macro array_property_object_string(array, name, format) %}
    {% if format == 'date' %}
            $this->{{ array }}[$i]->{{ name }} = DateTime::createFromFormat(
                '{{ input_date_format }}', 
                $results->{{ array }}[$i]->{{ name }}
            );
    {% else %}
            $this->{{ array }}[$i]->{{ name }} = $results->{{ array }}[$i]->{{ name }};
    {% endif %}
{% endmacro %}

{% macro array_property_object_number(array, name, format) %}
            $this->{{ array }}[$i]->{{ name }} = intval(
                $results->{{ array }}[$i]->{{ name }}
            );
{% endmacro %}

{% macro array_property_object_boolean(array, name) %}
            $this->{{ array }}[$i]->{{ name }} = (1 == $results->{{ array }}[$i]->{{ name }});
{% endmacro %}

{% macro array_property_object_resource(array, name) %}
            if ($results->{{ array }}[$i]->{{ name }}Id !== null) {
                $this->{{ array }}[$i]->{{ name }}->id(
                    $results->{{ array }}[$i]->{{ name }}Id
                );
            } else {
                $this->{{ array }}[$i]->{{ name }} = new NullResource();
            }
{% endmacro %}

{% macro array_property_object_collection(array, name) %}
            if ($results->{{ array }}[$i]->{{ name }}Id !== null) {
                $this->{{ array }}[$i]->{{ name }}->id(
                    $results->{{ array }}[$i]->{{ name }}Id
                );
                $this->{{ array }}[$i]->{{ name }}->meta->total = intval(
                    $results->{{ array }}[$i]->{{ name }}Total
                );
            } else {
                $this->{{ array }}[$i]->{{ name }} = new NullResource();
            }
{% endmacro %}



