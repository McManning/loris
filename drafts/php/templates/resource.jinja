<?php
namespace Loris\Resource;

use \Loris\Utility;

class {{ id }} extends Base\{{ id }}
{
    /**
     * @param array({{ id }}) ${{ id|camelcase }}s
     */
    public static function query(array ${{ id|camelcase }}s)
    {
        /**********************************************************
            YOUR BACKEND QUERY CODE HERE

            Useful variables for your query include:
                $generatedResources[N]->id() - unique identifier

            The output of your query must be formatted as below:

            $results = array(
                id = stdClass(
                    id = string
            {% for name, property in properties|dictsort -%}
                {% if property.type == 'string' %}
                    {% if property.format == 'date' %}
                    {{ name }} = string formatted '{{ input_date_format }}'
                    {% else %}
                    {{ name }} = string
                    {% endif %}
                {% elif property.type == 'number' %}
                    {{ name }} = number
                {% elif property.type == 'boolean' %}
                    {{ name }} = boolean
                {% elif property.type == 'resource' %}
                    {{ name }}Id = string
                {% elif property.type == 'collection' %}
                    {{ name }}Id = string
                    {{ name }}Total = number
                {% elif property.type == 'object' %}
                    {{ name }} = stdClass(
                    {% for name2, property2 in property.properties|dictsort %}
                    {% if property2.type == 'string' %}
                        {% if property2.format == 'date' %}
                        {{ name2 }} = string formatted '{{ input_date_format }}'
                        {% else %}
                        {{ name2 }} = string
                        {% endif %}
                    {% elif property2.type == 'number' %}
                        {{ name2 }} = number
                    {% elif property2.type == 'boolean' %}
                        {{ name2 }} = boolean
                    {% elif property2.type == 'resource' %}
                        {{ name2 }}Id = string
                    {% elif property2.type == 'collection' %}
                        {{ name2 }}Id = string
                        {{ name2 }}Total = number
                    {% endif %}
                    {% endfor %}
                    )
                {% elif property.type == 'array' %}
                    {{ name }} = array(
                    {% if property['items'].type == 'string' %}
                        {% if property['items'].format == 'date' %}
                        string formatted '{{ input_date_format }}'
                        {% else %}
                        string
                        {% endif %}
                    {% elif property['items'].type == 'number' %}
                        number
                    {% elif property['items'].type == 'boolean' %}
                        boolean
                    {% elif property['items'].type == 'resource' %}
                        stdClass(
                            {{ property['items'].resource|camelcase }}Id = string
                        )
                    {% elif property['items'].type == 'collection' %}
                        stdClass(
                            {{ property['items'].collection|camelcase }}Id = string
                            {{ property['items'].collection|camelcase }}Total = number
                        )
                    {% elif property['items'].type == 'object' %}
                        stdClass(
                        {% for name2, property2 in property['items'].properties|dictsort %}
                        {% if property2.type == 'string' %}
                            {% if property2.format == 'date' %}
                            {{ name2 }} = string formatted '{{ input_date_format }}'
                            {% else %}
                            {{ name2 }} = string
                            {% endif %}
                        {% elif property2.type == 'number' %}
                            {{ name2 }} = number
                        {% elif property2.type == 'boolean' %}
                            {{ name2 }} = boolean
                        {% elif property2.type == 'resource' %}
                            {{ name2 }}Id = string
                        {% elif property2.type == 'collection' %}
                            {{ name2 }}Id = string
                            {{ name2 }}Total = number
                        {% endif %}
                        {% endfor %}
                        )
                    {% endif %}
                        ...
                    )
                {% endif %}
            {%- endfor %}
                )
                ...
            )

            !!  Important note: It may be possible that multiple
                resources that share the same ID may be in the list
                at once (depending on how expansions and relationships
                are performed internally). It is up to the implementer
                to ensure that only unique IDs are returned in the 
                $results array (postQuery will make the effort to 
                remap these to each resource that shares IDs)

        ***********************************************************/

        self::postQuery(${{ id|camelcase }}s, $results);
    }
}

